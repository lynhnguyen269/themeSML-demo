<?phpclass themesflat_exportData{	private static $instance;		public static function init() {		if ( self::$instance == null ) {			self::$instance = new self();		}	}		private function __construct() {		if ( ! is_admin() )			return;		add_action( 'admin_menu', array( $this, 'admin_menu' ) );	}		public function admin_menu() {		add_theme_page( esc_html__( 'Export Demo Installation', 'redbiz' ), esc_html__( 'Export Demo', 'redbiz' ), 'edit_theme_options', 'export-data', array( $this, 'admin_view' ) );	}		public function admin_view() {	global $wpdb;		update_option('flat_base_url',get_site_url());	$bypass_option = array("'home'","'blogname'","'blogdescription'","'admin_email'","'active_plugins'","'capabilities'","'users'","'usermeta'");	$bypass_text = implode($bypass_option,",");	foreach ( $wpdb->get_results( "SHOW TABLES", ARRAY_N ) as $table ) {		$abc = $wpdb->get_results( str_replace( "'","",$wpdb->prepare("DESCRIBE %s;",$table[0]) ),ARRAY_A);		$table_name = str_replace($wpdb->prefix, '', $table[0]);		$user_roles = "{$wpdb->prefix}user_roles";		$sql = '';		if ($table_name == 'options' ) {			 $sql = "				SELECT * 				FROM `$table[0]` 				WHERE option_name NOT IN (".$bypass_text.")";		}		elseif ($table_name != 'usermeta' && $table_name != 'users') {			$sql = $wpdb->prepare("				SELECT * 				FROM %s",$table[0]);			$sql = str_replace( "'","",$sql );		}		if ($sql != '') {			$te = $wpdb->get_results( $sql, ARRAY_A ); 		 	switch ($table_name) {				case 'options':					$options[$table_name]['structure'] = $abc;					$options[$table_name]['data'] = $te;					break;				case 'postmeta':					$postmeta[$table_name]['structure'] = $abc;					$postmeta[$table_name]['data'] = $te;					break;				case 'posts':					$posts[$table_name]['structure'] = $abc;					$posts[$table_name]['data'] = $te;					break;				default:					$flatdata[$table_name]['structure'] = $abc;					$flatdata[$table_name]['data'] = $te;					break;			}		}	}	global $wp_filesystem;		if (empty($wp_filesystem)) {	  themesflat_wpfilesystem();	}	$wp_filesystem->put_contents(THEMESFLAT_DIR."sampledata/general.json",json_encode($flatdata));	$wp_filesystem->put_contents(THEMESFLAT_DIR."sampledata/others.json",json_encode($postmeta));	$wp_filesystem->put_contents(THEMESFLAT_DIR."sampledata/options.json",json_encode($options));	$wp_filesystem->put_contents(THEMESFLAT_DIR."sampledata/content.json",json_encode($posts));	echo '<h4 class="alert-export-demo" style="margin-left: 10px; color: #46b450;"><i class="import_alert dashicons dashicons-yes yes"></i> Export Data Complete</4>';}}themesflat_exportData::init();